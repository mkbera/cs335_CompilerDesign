\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[margin = 0.7in]{geometry}
\usepackage{amsmath, amssymb, mathtools, bm, amsthm}
\usepackage{scrextend}
\usepackage{tikz,forest}
\usepackage{xspace}
\usepackage{algorithm, algorithmicx, algpseudocode}
\usepackage{mdframed}
\usepackage[colorlinks]{hyperref}
\usepackage{framed}
\usepackage{float}
\usepackage{graphics}
\usepackage{xifthen}
\usepackage[normalem]{ulem}
\usepackage{enumitem}
\usepackage{array}
\usepackage{etoolbox}
\usepackage{color}
\usepackage{tabularx}
\usepackage{makecell}
\usepackage{anyfontsize}
\usepackage[none]{hyphenat}
\usepackage{sectsty}
\usepackage{textcomp}
\usepackage{longtable}

\usetikzlibrary{arrows,automata}

%% General Formatting

% Set paragraph indent to zero
\setlength\parindent{0pt}
% Set long table indent to zero
\setlength{\LTleft}{0pt}

% Self Defined Colors
\definecolor{silver}{RGB}{220, 220, 220}

% Fonts
\renewcommand{\ttdefault}{lmtt}
\renewcommand{\sfdefault}{cmss}

% Title Numbering and Label Font Styles
\sectionfont{\normalfont\fontsize{14}{12}\fontfamily{qag}\selectfont}
\subsectionfont{\normalfont\fontsize{13}{12}\fontfamily{qag}\selectfont}
\subsubsectionfont{\normalfont\fontsize{12.5}{12}\sffamily\selectfont}

\renewcommand{\thesection}{{\fontfamily{lmss}\selectfont \arabic{section}.}}
\renewcommand{\thesubsection}{{\fontfamily{lmss}\selectfont \arabic{section}.\arabic{subsection}}}
\renewcommand{\thesubsubsection}{{\fontfamily{lmss}\selectfont \arabic{section}.\arabic{subsection}.\arabic{subsubsection}}}

% Change line number format in algorithms
\algrenewcommand\alglinenumber[1]{\footnotesize {#1} \quad}
\AtBeginEnvironment{algorithmic}{\linespread{1.1}\ttfamily\fontseries{l}\selectfont}

% Black urls for bib items
\AtBeginEnvironment{thebibliography}{
	\hypersetup{
		colorlinks=true,
		linkcolor=black,
		filecolor=black,
		urlcolor=black,
	}
}

% Change vertical cell padding for tables
\def\arraystretch{1.5}

% Hyperlinks
\hypersetup{%
    colorlinks=true,
    linkcolor=blue,
    filecolor=magenta,
    urlcolor=cyan,
}


%% Text Formatting
\newcommand{\bt}[1]{\textbf{#1}}
\newcommand{\st}[1]{\textsc{#1}}
\newcommand{\et}[1]{\textit{#1}}
\newcommand{\ut}[1]{\uline{#1}}
\newcommand{\ct}[1]{\texttt{#1}}
\newcommand{\ft}[1]{{\sffamily #1}}


%% List Formatting
\newcommand{\ditem}[1][]{
	\item \bt{\ft{#1}}\;
}


% Left Rule box environment
\newmdenv[
	topline=false,
	bottomline=false,
	rightline=false,
	skipabove=\topsep,
	skipbelow=\topsep]
{siderule}


%% Formatted Letters
\def\LatinUpper{A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z}
\def\LatinLower{a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z}

% Caligraphic fonts
\newcommand{\genCal}[1]{\expandafter\newcommand\csname c#1\endcsname{{\mathcal #1}}}
\@for\i:=\LatinUpper\do{%
	\expandafter\genCal\i
}

% Blackboard fonts
\newcommand{\genBb}[1]{\expandafter\newcommand\csname b#1\endcsname{{\mathbb #1}}}
\@for\i:=\LatinUpper\do{%
	\expandafter\genBb\i
}

% Fraktur fonts
\newcommand{\genFk}[1]{\expandafter\newcommand\csname k#1\endcsname{{\mathfrak #1}}}
\@for\i:=\LatinUpper\do{%
	\expandafter\genFk\i
}

\newcommand{\genFkl}[1]{\expandafter\newcommand\csname k#1\endcsname{{\mathfrak #1}}}
\@for\i:=\LatinLower\do{%
	\expandafter\genFkl\i
}

% Vectors
\renewcommand{\vec}[1]{{\mathbf{#1}}}
\newcommand{\genLatinVec}[1]{\expandafter\newcommand\csname v#1\endcsname{{\vec #1}}}
\@for\i:=\LatinLower\do{%
	\expandafter\genLatinVec\i
}

\newcommand{\genLatinVecU}[1]{\expandafter\newcommand\csname v#1\endcsname{{\vec #1}}}
\@for\i:=\LatinUpper\do{%
	\expandafter\genLatinVecU\i
}

% Random Vectors
\newcommand{\randvec}[1]{{\ut{#1}}}
\newcommand{\genLatinRandVec}[1]{\expandafter\newcommand\csname u#1\endcsname{{\randvec #1}}}
\@for\i:=\LatinUpper\do{%
	\expandafter\genLatinRandVec\i
}
% Greek symbol vectors
\def\mydefgreek#1{\expandafter\def\csname v#1\endcsname{\text{\boldmath$\mathbf{\csname #1\endcsname}$}}}
\def\mydefallgreek#1{\ifx\mydefallgreek#1\else\mydefgreek{#1}%
   \lowercase{\mydefgreek{#1}}\expandafter\mydefallgreek\fi}
\mydefallgreek {alpha}{beta}{gamma}{delta}{epsilon}{varepsilon}{zeta}{eta}{theta}{vartheta}{iota}{kappa}{lambda}{mu}{nu}{xi}{omicron}{pi}{rho}{varrho}{sigma}{tau}{upsilon}{phi}{varphi}{chi}{psi}{omega}\mydefallgreek

% Upper Greek symbol vectors
\def\mydefugreek#1{\expandafter\def\csname v#1\endcsname{\text{\boldmath$\mathbf{\csname #1\endcsname}$}}}
\def\mydefallugreek#1{\ifx\mydefallugreek#1\else\mydefugreek{#1}%
   \lowercase{\mydefugreek{#1}}\expandafter\mydefallugreek\fi}
\mydefallugreek{Gamma}{Delta}{Theta}{Lambda}{Xi}{Sigma}{Upsilon}{Phi}{Psi}{Omega}\mydefallugreek

% Vector numerals
\newcommand{\vzero}{\vec{0}}
\newcommand{\vone}{\vec{1}}


%% Table Column Types
\newcolumntype{X}[1]{>{\centering\arraybackslash\hspace{0pt}}p{#1}}
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}


%% Brackets
\newcommand{\set}[1]{\left\{ {#1} \right\}}
\newcommand{\brac}[1]{\left[\,{#1}\,\right]}
\newcommand{\para}[1]{\left( {#1} \right)}
\newcommand{\angl}[1]{\left\langle {#1} \right\rangle}

\newcommand{\qset}[1]{\,\left\{ {#1} \right\}\,}
\newcommand{\qbrac}[1]{\,\left[\,{#1}\,\right]\,}
\newcommand{\qpara}[1]{\,\left( {#1} \right)\,}
\newcommand{\qangl}[1]{\,\left\langle {#1} \right\rangle\,}

\newcommand{\mt}[1]{\text{#1}\,\,}
\newcommand{\qmt}[1]{\,\,\text{#1}\,\,}
\newcommand{\mcmnt}[1]{&\left[ \text{#1} \right]}


%% Vertical Spacing
\newcommand{\sbr}{\vspace{1pt}\xspace}
\newcommand{\br}{\vspace{2.5mm}\xspace}
\newcommand{\lbr}{\vspace{3mm}\xspace}
\newcommand{\nbr}{\vspace{5mm}\xspace}


%% Math Functions
\newcommand{\func}[3][]{%
	\, {#2}\ifthenelse{\equal{#1}{}}{}{_{#1}} \para{#3}
}
\newcommand{\tfunc}[3][]{%
	\, \text{#2}\ifthenelse{\equal{#1}{}}{}{_{#1}} \para{#3}
}
\newcommand{\funcinv}[3][]{%
	\func{\ifthenelse{\equal{#1}{}}{{#2}^{-1}}{\para{{#2}^{#1}}^{-1}}}{#3}
}

\newcommand{\sigmoid}[1]{\func{\sigma}{#1}}

\newcommand{\prob}[2][]{%
	\bP\ifthenelse{\equal{#1}{}}{}{_{#1}}\brac{#2}
}
\newcommand{\aprob}[2][]{%
	\widetilde{\bP}\ifthenelse{\equal{#1}{}}{}{_{#1}}\brac{#2}
}

\newcommand{\der}[2]{\frac{d \para{#1}}{d \para{#2}}}
\newcommand{\ders}[1]{\frac{d}{d {#1}}}
\newcommand{\derp}[2]{\frac{\delta \para{#1}}{\delta \para{#2}}}

\newcommand{\abs}[1]{\left| \,{#1}\, \right|}
\newcommand{\norm}[1]{\left\| {#1} \right\|}
\newcommand{\ceil}[1]{\left\lceil {#1} \right\rceil}
\newcommand{\floor}[1]{\left\lfloor {#1} \right\rfloor}
\newcommand{\dotp}[2]{\langle{#1},{#2}\rangle}
\renewcommand{\exp}[1]{e^{#1}}
\newcommand{\texp}[1]{\tfunc{exp}{#1}}
\newcommand{\fact}[1]{\para{#1}!}

\newcommand{\compl}{\overline}

\renewcommand{\log}[2][]{%
	\ifthenelse{\equal{#1}{}}{\tfunc{log}{#2}}{\tfunc[#1]{log}{#2}}
}
\renewcommand{\ln}[2][]{%
	\ifthenelse{\equal{#1}{}}{\tfunc{ln}{#2}}{\tfunc[#1]{ln}{#2}}
}

\newcommand{\is}[1]{\bI \brac{#1}}
\newcommand{\trace}[1]{\func{\mt{Tr}}{#1}}

\newcommand{\E}[2][]{%
	\ifthenelse{\equal{#1}{}}{\bE}{\underset{#1}{\bE}}\brac{#2}
}
\newcommand{\var}[2][]{%
	\tfunc{Var\ifthenelse{\equal{#1}{}}{}{_{#1}}}{#2}
}

\newcommand{\err}[2][]{\text{er}#1\brac{#2}}
\newcommand{\errs}[2][]{\text{er}#1\hat{\brac{#2}}}


%% Arrows
\newcommand{\lra}{\longrightarrow}
\newcommand{\lla}{\longleftarrow}
\newcommand{\ra}{\rightarrow}
\newcommand{\la}{\leftarrow}


%% Operators
\newcommand{\defines}{\overset{\Delta}{=}}


%Spacing
\newcommand{\eq}{\quad = \quad}
\newcommand{\qimpl}{\quad \implies \quad}
\newcommand{\qsim}{\quad \sim \quad}
\newcommand{\qprop}{\quad \propto \quad}
\newcommand{\qlt}{\quad < \quad}
\newcommand{\qgt}{\quad > \quad}
\newcommand{\qle}{\quad \le \quad}
\newcommand{\qge}{\quad \ge \quad}
\newcommand{\qdefines}{\quad\defines\quad}
\newcommand{\qapprox}{\quad\approx\quad}
\newcommand{\qimplies}{\quad\implies\quad}
\newcommand{\qsubset}{\quad\subset\quad}
\newcommand{\qsubseteq}{\quad\subseteq\quad}


%% Math Pre Functions
\newcommand{\qforall}{\,\forall\,}
\newcommand{\qexists}{\,\exists\,}
\newcommand{\argmin}[1]{\mathop{\arg\min}_{#1}\:}
\newcommand{\argmax}[1]{\mathop{\arg\max}_{#1}\:}

\newcommand{\pr}[1]{{#1}^{\prime}}
\newcommand{\trans}[1]{{#1}^{\text{T}}}


%% Asymptotic notation
\newcommand{\bigO}[1]{\cO \para{#1}}
\newcommand{\softO}[1]{\widetilde{\cO}\para{#1}}
\newcommand{\Om}[1]{\Omega\para{#1}}
\newcommand{\softOm}[1]{\tilde\Omega\para{#1}}


%% Miscellaneous
\newcommand{\pipe}{\;\big|\;}
\newcommand{\eps}{\epsilon}

\newenvironment{margin}[0]
{%
	\begin{addmargin}{1.5em}
}
{%
	\end{addmargin}
}

\newcommand{\tth}[1][]{\ifthenelse{\equal{#1}{}}{$^\tiny{\text{th}}$}{$^\tiny{\text{#1}}$}\,}
\newcommand{\sups}[1]{$^\mt{#1}$}
\newcommand{\supst}[1]{$^\tiny{\mt{#1}}$}

\newcommand{\ie}{\et{i.e.}\;}

\newcommand{\iid}{
	\mathrel{\overset{iid}{\scalebox{1.5}[1]{$\sim$}}}
}

\newcommand{\ND}[1]{\func{\cN}{#1}}


%% Environments
\floatstyle{plain}
\newfloat{algofloat}{tbhp}

\newcounter{algo}
\newenvironment{algo}[3][0.8\textwidth]
{
	\refstepcounter{algo}
    \begin{algofloat}[{#2}]
		\begin{center}
    		\begin{minipage}{#1}
    			\begin{framed}
    				\begin{center}
						\bt{Algorithm \thealgo}: #3
						\vspace{1.5mm}
						\textcolor{silver}{\hline}
					\end{center}
    \nbr
}
{%
				\end{framed}
			\end{minipage}
		\end{center}
	\end{algofloat}
}

\newenvironment{induction}[0]
{
	\newcommand{\base}{%
		\bt{\st{Base Case}}
		\sbr\
		\begin{addmargin}{1em}
			\begin{siderule}
	}

	\newcommand{\hypoth}{%
			\end{siderule}
		\end{addmargin}
		\sbr%

		\bt{\st{Hypothesis}}
		\sbr%
		\begin{addmargin}{1em}
			\begin{siderule}
	}

	\newcommand{\indctn}{%
			\end{siderule}
		\end{addmargin}
		\sbr%
		\bt{\st{Induction}}
		\sbr%
		\begin{addmargin}{1em}
			\begin{siderule}
	}
}
{%
			\end{siderule}
		\end{addmargin}
		\br%

		\let\base\undefine
		\let\hypoth\undefine
		\let\indctn\undefine
}

\newcommand{\twocols}[4]{
	\begin{tabular}[h!]{@{}b{#2} L{#1}}
		\bt{\st{#3 } }	&	#4
	\end{tabular}
}

\newtheoremstyle{fatt}{}{}{}{}{\bfseries}{.}{.5em}{}

\newcounter{seriescode}
\setcounter{seriescode}{1}

% Theorem environments
\theoremstyle{fatt}
\newtheorem{theorem}{Theorem}[seriescode]
\newtheorem{lemma}[theorem]{Lemma}
\newtheorem{corollary}[theorem]{Corollary}
\newtheorem{claim}[theorem]{Claim}
\newtheorem{proposition}[theorem]{Proposition}
\newtheorem*{remark}{Remark}
\newtheorem*{note}{Note}
\newtheorem{definition}{Definition}[seriescode]
\newtheorem{example}{Example}[seriescode]
\newtheorem{exercise}{Exercise}[seriescode]
\newtheorem{result}{Result}[definition]

\newcommand{\hint}[1]{\begin{flushright} \et{Hint: #1} \end{flushright}}

\makeatletter
\renewenvironment{proof}[1][\proofname] {\par\pushQED{\qed}\normalfont\topsep6\p@\@plus6\p@\relax\trivlist\item[\hskip\labelsep\bfseries#1\@addpunct{.}\;]\ignorespaces}{\popQED\endtrivlist\@endpefalse}
\makeatother
